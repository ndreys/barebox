#ifndef __IMX8_DDRC_H__
#define __IMX8_DDRC_H__

#define DDRC_MSTR		0x00000
#define DDRC_STAT		0x00004
#define DDRC_PWRCTL		0x00030
#define DDRC_RFSHCTL3		0x00060
#define DDRC_RFSHTMG		0x00064
#define DDRC_INIT0		0x000d0
#define DDRC_INIT1		0x000d4
#define DDRC_INIT2		0x000d8
#define DDRC_INIT3		0x000dc
#define DDRC_INIT4		0x000e0
#define DDRC_INIT5		0x000e4
#define DDRC_INIT6		0x000e8
#define DDRC_INIT7		0x000ec
#define DDRC_RANKCTL		0x000f4
#define DDRC_DRAMTMG0		0x00100
#define DDRC_DRAMTMG1		0x00104
#define DDRC_DRAMTMG2		0x00108
#define DDRC_DRAMTMG3		0x0010c
#define DDRC_DRAMTMG4		0x00110
#define DDRC_DRAMTMG5		0x00114
#define DDRC_DRAMTMG6		0x00118
#define DDRC_DRAMTMG7		0x0011c
#define DDRC_DRAMTMG8		0x00120
#define DDRC_DRAMTMG9		0x00124
#define DDRC_DRAMTMG10		0x00128
#define DDRC_DRAMTMG11		0x0012c
#define DDRC_DRAMTMG12		0x00130
#define DDRC_DRAMTMG13		0x00134
#define DDRC_DRAMTMG14		0x00138
#define DDRC_DRAMTMG15		0x0013c
#define DDRC_DRAMTMG17		0x00144
#define DDRC_ZQCTL0		0x00180
#define DDRC_ZQCTL1		0x00184
#define DDRC_ZQCTL2		0x00188
#define DDRC_DFITMG0		0x00190
#define DDRC_DFITMG1		0x00194
#define DDRC_DFIUPD0		0x001a0
#define DDRC_DFIUPD1		0x001a4
#define DDRC_DFIUPD2		0x001a8
#define DDRC_DFIMISC		0x001b0
#define DDRC_DFITMG2		0x001b4
#define DDRC_DFISTAT		0x001bc
#define DDRC_DBICTL		0x001c0
#define DDRC_DFIPHYMSTR		0x001c4
#define DDRC_ADDRMAP0		0x00200
#define DDRC_ADDRMAP1		0x00204
#define DDRC_ADDRMAP4		0x00210
#define DDRC_ADDRMAP5		0x00214
#define DDRC_ADDRMAP6		0x00218
#define DDRC_ODTCFG		0x00240
#define DDRC_ODTCFG		0x00240
#define DDRC_ODTMAP		0x00244
#define DDRC_ODTMAP		0x00244
#define DDRC_SCHED		0x00250
#define DDRC_SCHED1		0x00254
#define DDRC_PERFHPR1		0x0025c
#define DDRC_PERFLPR1		0x00264
#define DDRC_PERFWR1		0x0026c
#define DDRC_DBG0		0x00300
#define DDRC_DBG1		0x00304
#define DDRC_DBGCMD		0x0030c
#define DDRC_SWCTL		0x00320
#define DDRC_SWCTL		0x00320
#define DDRC_SWSTAT		0x00324
#define DDRC_POISONCFG		0x0036c
#define DDRC_PCCFG		0x00400
#define DDRC_PCFG0_PCFGR	0x00404
#define DDRC_PCFG0_PCFGW	0x00408
#define DDRC_PCTRL_0		0x00490
#define DDRC_PCFG0_PCTRL	0x00490
#define DDRC_PCFG0_PCTRL	0x00490
#define DDRC_PCFG0_PCFGQOS0	0x00494
#define DDRC_PCFG0_PCFGQOS1	0x00498
#define DDRC_PCFG0_PCFGWQOS0	0x0049c
#define DDRC_PCFG0_PCFGWQOS1	0x004a0
#define DDRC_FREQ1_DERATEEN	0x02020
#define DDRC_FREQ1_DERATEINT	0x02024
#define DDRC_FREQ1_DERATEINT	0x02024
#define DDRC_FREQ1_RFSHCTL0	0x02050
#define DDRC_FREQ1_RFSHTMG	0x02064
#define DDRC_FREQ1_INIT3	0x020dc
#define DDRC_FREQ1_INIT4	0x020e0
#define DDRC_FREQ1_INIT6	0x020e8
#define DDRC_FREQ1_INIT7	0x020ec
#define DDRC_FREQ1_DRAMTMG0	0x02100
#define DDRC_FREQ1_DRAMTMG1	0x02104
#define DDRC_FREQ1_DRAMTMG2	0x02108
#define DDRC_FREQ1_DRAMTMG3	0x0210c
#define DDRC_FREQ1_DRAMTMG4	0x02110
#define DDRC_FREQ1_DRAMTMG5	0x02114
#define DDRC_FREQ1_DRAMTMG6	0x02118
#define DDRC_FREQ1_DRAMTMG7	0x0211c
#define DDRC_FREQ1_DRAMTMG14	0x02138
#define DDRC_FREQ1_DRAMTMG15	0x0213c
#define DDRC_FREQ1_DRAMTMG17	0x02144
#define DDRC_FREQ1_DFITMG0	0x02190
#define DDRC_FREQ1_DFITMG0	0x02190
#define DDRC_FREQ1_DFITMG2	0x021b4
#define DDRC_FREQ1_ODTCFG	0x02240
#define DDRC_FREQ2_DERATEINT	0x03024
#define DDRC_FREQ2_RFSHCTL0	0x03050
#define DDRC_FREQ2_RFSHTMG	0x03064
#define DDRC_FREQ2_INIT3	0x030dc
#define DDRC_FREQ2_INIT4	0x030e0
#define DDRC_FREQ2_INIT6	0x030e8
#define DDRC_FREQ2_INIT7	0x030ec
#define DDRC_FREQ2_DRAMTMG0	0x03100
#define DDRC_FREQ2_DRAMTMG1	0x03104
#define DDRC_FREQ2_DRAMTMG2	0x03108
#define DDRC_FREQ2_DRAMTMG3	0x0310c
#define DDRC_FREQ2_DRAMTMG4	0x03110
#define DDRC_FREQ2_DRAMTMG5	0x03114
#define DDRC_FREQ2_DRAMTMG6	0x03118
#define DDRC_FREQ2_DRAMTMG7	0x0311c
#define DDRC_FREQ2_DRAMTMG14	0x03138
#define DDRC_FREQ2_DRAMTMG15	0x0313c
#define DDRC_FREQ2_DRAMTMG17	0x03144
#define DDRC_FREQ2_DFITMG0	0x03190
#define DDRC_FREQ2_DFITMG0	0x03190
#define DDRC_FREQ2_DFITMG2	0x031b4
#define DDRC_FREQ2_ODTCFG	0x03240

enum ddrc_phy_firmware_offset {
	DDRC_PHY_IMEM = 0x00050000U,
	DDRC_PHY_DMEM = 0x00054000U,
};

void ddrc_phy_load_firmware(void __iomem *,
			    enum ddrc_phy_firmware_offset,
			    const u16 *, size_t);

#define DDRC_PHY_FIRMWARE(f)						\
	__##f##_start,							\
	((size_t)((ptrdiff_t)__##f##_end - (ptrdiff_t)__##f##_start))

#define DDRC_PHY_REG(x)	((x) * 4)

void ddrc_phy_execute_training_firmware(void __iomem *phy);

enum ddrc_phy_pstate {
	DDRC_PHY_PSTATE_PS0,
	DDRC_PHY_PSTATE_PS1,
	DDRC_PHY_PSTATE_PS2,
	DDRC_PHY_PSTATE_PS3,
};

void ddrc_phy_configure_clock_for_pstate(enum ddrc_phy_pstate);

void nxp_imx8mq_evk_init_ddr(const u16 *, size_t,
			     const u16 *, size_t,
			     const u16 *, size_t,
			     const u16 *, size_t);

#endif